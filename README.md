# T2：命令行交互的指标结果查询子模块

### 1、背景介绍

OpenDigger 实现了各类统计型和网络型的指标，详细内容参考这里。这些指标目前以 HTTPS URL 的形式提供 JSON 数据文件的查询结果，用户想查询某一个仓库在某一个指标的对应数据，可以通过修改 URL 的方式得到。在本任务中，我们希望实现一种新型的指标结果查询方式，即通过 command line（命令行），实现可交互的指标结果查询。

### 2、任务介绍

本任务是基于 OpenDigger 已实现的各类指标，开发一个命令行工具，使得用户可以在终端查询 GitHub 上每一个仓库或每一个开发者在各项指标上的数据结果。

**任务重点** 该子模块最终形态应该是一个可运行的 CLI 工具，安装后，用户可以通过一系列的命令达成以下查询功能：

（1）查询特定仓库在特定指标上的数据，并支持本地导出功能，参考示例如下：

```shell
$ opendigger repo = X-lab2017/open-digger metric = OpenRank
repo.name:open-digger
repo.url:https://github.com/X-lab2017/open-digger
openrank:{"2020-08":4.5,"2020-09":4.91,"2020-10":5.59,"2020-11":6.31,"2020-12":9.96,"2021-01":10.61,"2021-02":6.28,"2021-03":4.14,"2021-04":4.44,"2021-05":4.26,"2021-06":6.46,"2021-07":4.84,"2021-08":3.93,"2021-09":3.34,"2021-10":3,"2021-11":2.89,"2021-12":3.33,"2022-01":4.71,"2022-02":4.87,"2022-03":6.06,"2022-04":3.76,"2022-05":4.14,"2022-06":7.67,"2022-07":9.17,"2022-08":8.53,"2022-09":9.96,"2022-10":11.84,"2022-11":14.65,"2022-12":19.36,"2023-01":19.9,"2023-02":40.48,"2023-03":22.05,"2021-10-raw":2.84}

$ opendigger download
```


（2）查询特定仓库在特定自然月上在特定指标上的数据，参考示例如下：
```shell
$ opendigger repo = X-lab2017/open-digger metric = OpenRank month = 2023-01
repo.name:open-digger
repo.url:https://github.com/X-lab2017/open-digger
month:2023-01
openrank:19.9

$ opendigger download
```

（3）查询特定仓库在特定自然月份上的整体报告，本支持本地导出功能，参考示例如下：

```shell
$ opendigger repo = X-lab2017/open-digger month = 2023-01
repo.name:open-digger
repo.url:https://github.com/X-lab2017/open-digger
month:2023-01
repo.index.xlab.openrank:19.9
repo.index.xlab.activity:15
repo.metric.chaoss.active dates and times:[0,1,3,5,8,1,5,3,1,3,2,1,0,0,2,1,0,0,0,0,0,0,0,0,0,0,6,10,1,1,1,1,3,2,5,0,2,6,1,0,0,1,1,0,0,0,0,0,0,2,4,7,1,4,6,1,1,0,1,0,1,2,0,1,0,0,0,0,0,0,0,0,1,2,3,3,1,3,8,4,3,3,1,0,1,2,1,0,0,1,2,0,0,1,0,0,0,3,6,3,5,2,3,1,6,3,1,3,7,4,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,1,0,1,0,2,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,0,0,8,0,6,1,1,0,1,0,0,0,0,0,0,0,0,0]

$ opendigger download
```

- 理想状态下，上述结果导出的是一份包含了各项指标细节的开源项目健康报告，各参赛团队可以摸索更好的查询结果的形式，使之更像是一份完善的月度报告；
- 此外，还可以考虑灵活设置更多参数，如，只查询 index 指标，只查询 chaoss 指标，等


### 3、示范案例

参考 OpenSSF 实现的和项目安全健康度指标相关的两个工具：

https://github.com/ossf/criticality_score

https://github.com/ossf/scorecard